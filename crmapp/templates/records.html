{% extends 'base.html' %}
{% block content %}

<div class="table-responsive">
<table class="table table-striped table-hover table-bordered">
  <thead class="table-primary">
    <tr>
      <th scope="col">Name</th>
      <th scope="col">Email</th>
      <th scope="col">Phone</th>
      <th scope="col">Address</th>
      <th scope="col">City</th>
      <th scope="col">State</th>
      <th scope="col">Zipcode</th>
      <th scope="col">Created On</th>
      <th scope="col">Details</th>
    </tr>
  </thead>
  <tbody>
    
{% if records %}
	{% for record in records %}
		<tr data-href="{% url 'record' record.id %}">
		<td>{{ record.first_name }} {{ record.last_name }}</td>
		<td>{{ record.email }}</td>
		<td>{{ record.phone }}</td>
		<td>{{ record.address }}</td>
		<td>{{ record.city }}</td>
		<td>{{ record.state }}</td>
		<td>{{ record.zipcode }}</td>
		<td>{{ record.created_at|date:"M d, Y" }}</td>
		<td>
    	<a href="{% url 'record' record.id %}" class="btn btn-sm btn-outline-primary" title="View Record">View</a>
  		</td>
		</tr>

	{% endfor %}

{% endif %}

	
	  </tbody>
	</table>
	</div>

	<script>
  document.addEventListener("DOMContentLoaded", function () {
    const rows = document.querySelectorAll("tr[data-href]");
    rows.forEach(row => {
      row.style.cursor = "pointer";
      row.addEventListener("click", function (e) {
        // Prevent redirect if a link or button inside the row is clicked
        if (!e.target.closest("a")) {
          window.location = this.dataset.href;
        }
      });
    });
  });
</script>


{% endblock %}
